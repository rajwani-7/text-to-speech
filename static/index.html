<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text to Speech Converter - Professional AI Voice Generation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 3s ease-in-out infinite',
                        'gradient': 'gradient 8s ease infinite',
                        'slide-up': 'slideUp 0.8s ease-out',
                        'fade-in': 'fadeIn 1s ease-out',
                        'scale-in': 'scaleIn 0.6s ease-out',
                        'bounce-gentle': 'bounceGentle 2s ease-in-out infinite',
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        /* Advanced Animations */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        @keyframes gradient {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        @keyframes slideUp {
            from { transform: translateY(100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes scaleIn {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        @keyframes bounceGentle {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        /* Glassmorphism Effects */
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .glass-dark {
            background: rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* Custom Gradients */
        .gradient-bg {
            background: linear-gradient(-45deg, #667eea, #764ba2, #f093fb, #f5576c, #4facfe, #00f2fe);
            background-size: 400% 400%;
            animation: gradient 8s ease infinite;
        }
        
        .text-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* Interactive Elements */
        .hover-lift {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .hover-lift:hover {
            transform: translateY(-8px);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        
        /* Audio Visualizer */
        .audio-bar {
            width: 4px;
            background: linear-gradient(to top, #667eea, #764ba2);
            border-radius: 2px;
            animation: audioWave 1.5s ease-in-out infinite;
        }
        
        .audio-bar:nth-child(2) { animation-delay: 0.1s; }
        .audio-bar:nth-child(3) { animation-delay: 0.2s; }
        .audio-bar:nth-child(4) { animation-delay: 0.3s; }
        .audio-bar:nth-child(5) { animation-delay: 0.4s; }
        
        @keyframes audioWave {
            0%, 100% { height: 20px; }
            50% { height: 40px; }
        }
        
        /* Loading Animation */
        .loading-dots {
            display: inline-flex;
            gap: 4px;
        }
        
        .loading-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #667eea;
            animation: loadingDot 1.4s ease-in-out infinite both;
        }
        
        .loading-dot:nth-child(1) { animation-delay: -0.32s; }
        .loading-dot:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes loadingDot {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }
        
        /* Scroll Animations */
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease-out;
        }
        
        .animate-on-scroll.visible {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body class="min-h-screen gradient-bg overflow-x-hidden">
    <!-- Hero Section -->
    <section class="pt-20 pb-20 px-6">
        <div class="max-w-7xl mx-auto text-center">
            <div class="animate-fade-in">
                <h1 class="text-6xl md:text-8xl font-bold text-white mb-8 leading-tight">
                    <span class="text-gradient block">Text to Speech</span>
                    Converter
                </h1>
                <p class="text-xl md:text-2xl text-white/80 mb-12 max-w-3xl mx-auto leading-relaxed">
                    Experience the future of AI-powered voice synthesis with studio-quality results, 
                    natural intonation, and lightning-fast processing.
                </p>
            </div>
            
            <!-- Floating Elements -->
            <div class="absolute top-40 left-10 w-20 h-20 bg-blue-500/20 rounded-full blur-xl animate-float"></div>
            <div class="absolute top-60 right-20 w-32 h-32 bg-purple-500/20 rounded-full blur-xl animate-float" style="animation-delay: 2s;"></div>
            <div class="absolute top-80 left-1/3 w-16 h-16 bg-pink-500/20 rounded-full blur-xl animate-float" style="animation-delay: 4s;"></div>
        </div>
    </section>

    <!-- Main Interface -->
    <section class="px-6 pb-20">
        <div class="max-w-5xl mx-auto">
            <div class="glass-dark rounded-3xl p-8 md:p-12 hover-lift animate-slide-up">
                <form id="ttsForm" enctype="multipart/form-data" class="space-y-8">
                    <!-- Text Input Section -->
                    <div class="animate-on-scroll">
                        <label class="block text-white text-lg font-semibold mb-4">
                            Enter Your Text
                        </label>
                        <div class="relative">
                            <textarea 
                                id="textInput" 
                                name="text_input" 
                                rows="8"
                                class="w-full p-6 rounded-2xl bg-white/10 backdrop-blur-md border border-white/20 text-white placeholder-white/60 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-transparent transition-all text-lg"
                                placeholder="Type or paste your text here... Our AI will bring it to life with natural, expressive speech."
                                maxlength="5000"
                            ></textarea>
                            <div class="absolute bottom-4 right-4 text-white/60 text-sm">
                                <span id="charCount">0</span>/5000
                            </div>
                        </div>
                    </div>

                    <!-- File Upload Section -->
                    <div class="animate-on-scroll">
                        <label class="block text-white text-lg font-semibold mb-4">
                            Or Upload Document
                        </label>
                        <div class="relative">
                            <input 
                                type="file" 
                                id="fileInput" 
                                name="file" 
                                accept=".txt,.pdf,.docx"
                                class="absolute inset-0 w-full h-full opacity-0 cursor-pointer"
                            >
                            <div class="border-2 border-dashed border-white/30 rounded-2xl p-8 text-center hover:border-white/50 transition-all hover:bg-white/5">
                                <svg class="w-12 h-12 text-white/60 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                                </svg>
                                <p class="text-white/80 text-lg mb-2">Drop your file here or click to browse</p>
                                <p class="text-white/60">Supports TXT, PDF, DOCX (max 16MB)</p>
                            </div>
                        </div>
                    </div>

                    <!-- Voice Recommendations Section -->
                    <div class="animate-on-scroll">
                        <label class="block text-white text-lg font-semibold mb-4">
                            Recommended Voices
                        </label>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                            <button type="button" class="voice-btn glass rounded-xl p-4 text-center hover:bg-white/20 transition-all" data-voice="neural">
                                <div class="w-8 h-8 bg-blue-500 rounded-full mx-auto mb-2"></div>
                                <p class="text-white text-sm font-medium">Neural</p>
                                <p class="text-white/60 text-xs">Natural & Clear</p>
                            </button>
                            <button type="button" class="voice-btn glass rounded-xl p-4 text-center hover:bg-white/20 transition-all" data-voice="premium">
                                <div class="w-8 h-8 bg-purple-500 rounded-full mx-auto mb-2"></div>
                                <p class="text-white text-sm font-medium">Premium</p>
                                <p class="text-white/60 text-xs">Professional</p>
                            </button>
                            <button type="button" class="voice-btn glass rounded-xl p-4 text-center hover:bg-white/20 transition-all" data-voice="expressive">
                                <div class="w-8 h-8 bg-green-500 rounded-full mx-auto mb-2"></div>
                                <p class="text-white text-sm font-medium">Expressive</p>
                                <p class="text-white/60 text-xs">Emotional</p>
                            </button>
                            <button type="button" class="voice-btn glass rounded-xl p-4 text-center hover:bg-white/20 transition-all" data-voice="calm">
                                <div class="w-8 h-8 bg-teal-500 rounded-full mx-auto mb-2"></div>
                                <p class="text-white text-sm font-medium">Calm</p>
                                <p class="text-white/60 text-xs">Soothing</p>
                            </button>
                        </div>
                    </div>

                    <!-- Language Recommendations Section -->
                    <div class="animate-on-scroll">
                        <label class="block text-white text-lg font-semibold mb-4">
                            Select Language
                        </label>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                            <button type="button" class="lang-btn glass rounded-xl p-4 text-center hover:bg-white/20 transition-all active" data-lang="en">
                                <div class="text-2xl mb-2">üá∫üá∏</div>
                                <p class="text-white text-sm font-medium">English</p>
                                <p class="text-white/60 text-xs">US/UK</p>
                            </button>
                            <button type="button" class="lang-btn glass rounded-xl p-4 text-center hover:bg-white/20 transition-all" data-lang="hi">
                                <div class="text-2xl mb-2">üáÆüá≥</div>
                                <p class="text-white text-sm font-medium">Hindi</p>
                                <p class="text-white/60 text-xs">‡§π‡§ø‡§Ç‡§¶‡•Ä</p>
                            </button>
                            <button type="button" class="lang-btn glass rounded-xl p-4 text-center hover:bg-white/20 transition-all" data-lang="gu">
                                <div class="text-2xl mb-2">üáÆüá≥</div>
                                <p class="text-white text-sm font-medium">Gujarati</p>
                                <p class="text-white/60 text-xs">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä</p>
                            </button>
                            <button type="button" class="lang-btn glass rounded-xl p-4 text-center hover:bg-white/20 transition-all" data-lang="mr">
                                <div class="text-2xl mb-2">üáÆüá≥</div>
                                <p class="text-white text-sm font-medium">Marathi</p>
                                <p class="text-white/60 text-xs">‡§Æ‡§∞‡§æ‡§†‡•Ä</p>
                            </button>
                        </div>
                    </div>

                    <!-- Controls Row -->
                    <div class="animate-on-scroll">
                        <!-- Voice Selection (Hidden) -->
                        <input type="hidden" id="selectedVoice" name="voice" value="neural">
                        
                        <!-- Language Selection (Hidden) -->
                        <input type="hidden" id="selectedLanguage" name="language" value="en">

                        <!-- Speed (Hidden - Default to Normal) -->
                        <input type="hidden" id="speed" name="speed" value="normal">
                    </div>

                    <!-- Generate Button -->
                    <div class="text-center animate-on-scroll">
                        <button 
                            type="submit" 
                            id="convertBtn"
                            class="px-12 py-4 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white text-xl font-bold rounded-2xl transition-all hover-lift disabled:opacity-50 disabled:cursor-not-allowed shadow-2xl"
                        >
                            <span class="flex items-center justify-center space-x-3">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                </svg>
                                <span>Generate Speech</span>
                            </span>
                        </button>
                    </div>
                </form>

                <!-- Results Section -->
                <div id="resultsSection" class="mt-12 hidden animate-scale-in">
                    <div class="glass rounded-2xl p-8">
                        <h3 class="text-2xl font-bold text-white mb-6 flex items-center">
                            <div class="flex space-x-1 mr-4">
                                <div class="audio-bar"></div>
                                <div class="audio-bar"></div>
                                <div class="audio-bar"></div>
                                <div class="audio-bar"></div>
                                <div class="audio-bar"></div>
                            </div>
                            Generated Audio
                        </h3>
                        
                        <!-- Success Message -->
                        <div id="successMessage" class="bg-green-500/20 border border-green-500/30 text-green-300 px-6 py-4 rounded-xl mb-6 hidden">
                            <span id="successText"></span>
                        </div>

                        <!-- Translation Info -->
                        <div id="translationInfo" class="bg-blue-500/20 border border-blue-500/30 text-blue-300 px-6 py-4 rounded-xl mb-6 hidden">
                            <h4 class="font-semibold mb-2">üîÑ Translation Applied</h4>
                            <p class="text-sm mb-2"><strong>Original:</strong> <span id="originalText"></span></p>
                            <p class="text-sm"><strong>Translated:</strong> <span id="translatedText"></span></p>
                        </div>

                        <!-- Audio Player -->
                        <div id="audioContainer" class="hidden">
                            <audio id="audioPlayer" controls class="w-full mb-6 rounded-xl">
                                Your browser does not support the audio element.
                            </audio>
                            
                            <!-- Download Button -->
                            <div class="flex space-x-4">
                                <a 
                                    id="downloadBtn" 
                                    href="#" 
                                    class="flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-6 rounded-xl text-center font-semibold transition-all hover-lift"
                                    download
                                >
                                    Download MP3
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Error Section -->
                <div id="errorSection" class="mt-8 bg-red-500/20 border border-red-500/30 text-red-300 px-6 py-4 rounded-xl hidden">
                    <span id="errorText"></span>
                </div>

                <!-- Loading Section -->
                <div id="loadingSection" class="mt-8 text-center py-12 hidden">
                    <div class="loading-dots mb-4">
                        <div class="loading-dot"></div>
                        <div class="loading-dot"></div>
                        <div class="loading-dot"></div>
                    </div>
                    <p class="text-white/80 text-lg">Crafting your perfect voice...</p>
                    <p class="text-white/60 text-sm mt-2">This may take a few moments</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="text-center py-8 px-6">
        <p class="text-white/60 text-sm">
            Developed by Harsh Rajwani ‚Ä¢ All Rights Reserved 2025
        </p>
    </footer>

    <script>
        // Character counter
        const textInput = document.getElementById('textInput');
        const charCount = document.getElementById('charCount');
        
        textInput.addEventListener('input', function() {
            charCount.textContent = this.value.length;
        });

        // Voice and Language Selection
        const voiceBtns = document.querySelectorAll('.voice-btn');
        const langBtns = document.querySelectorAll('.lang-btn');
        const selectedVoice = document.getElementById('selectedVoice');
        const selectedLanguage = document.getElementById('selectedLanguage');

        voiceBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                voiceBtns.forEach(b => b.classList.remove('bg-white/20'));
                this.classList.add('bg-white/20');
                selectedVoice.value = this.dataset.voice;
            });
        });

        langBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                langBtns.forEach(b => b.classList.remove('bg-white/20'));
                this.classList.add('bg-white/20');
                selectedLanguage.value = this.dataset.lang;
            });
        });

        // Set default selections
        document.querySelector('.voice-btn[data-voice="neural"]').classList.add('bg-white/20');

        // Scroll animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        document.querySelectorAll('.animate-on-scroll').forEach(el => {
            observer.observe(el);
        });

        // Form submission
        const form = document.getElementById('ttsForm');
        const convertBtn = document.getElementById('convertBtn');
        const loadingSection = document.getElementById('loadingSection');
        const resultsSection = document.getElementById('resultsSection');
        const errorSection = document.getElementById('errorSection');
        const successMessage = document.getElementById('successMessage');
        const translationInfo = document.getElementById('translationInfo');
        const originalText = document.getElementById('originalText');
        const translatedText = document.getElementById('translatedText');
        const audioContainer = document.getElementById('audioContainer');
        const audioPlayer = document.getElementById('audioPlayer');
        const downloadBtn = document.getElementById('downloadBtn');

        form.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            hideAllSections();
            loadingSection.classList.remove('hidden');
            convertBtn.disabled = true;
            convertBtn.innerHTML = `
                <span class="flex items-center justify-center space-x-3">
                    <div class="loading-dots">
                        <div class="loading-dot"></div>
                        <div class="loading-dot"></div>
                        <div class="loading-dot"></div>
                    </div>
                    <span>Generating...</span>
                </span>
            `;
            
            try {
                const formData = new FormData(form);
                
                // Ensure voice and language are included
                formData.set('voice', selectedVoice.value);
                formData.set('language', selectedLanguage.value);
                
                console.log('Sending data:', {
                    voice: selectedVoice.value,
                    language: selectedLanguage.value,
                    speed: document.getElementById('speed').value,
                    text_length: textInput.value.length
                });
                
                const response = await fetch('/convert', {
                    method: 'POST',
                    body: formData
                });
                
                const data = await response.json();
                
                if (data.success) {
                    document.getElementById('successText').textContent = data.message;
                    successMessage.classList.remove('hidden');
                    
                    // Show translation info if translation occurred
                    if (data.translation_occurred) {
                        originalText.textContent = data.original_text.substring(0, 100) + (data.original_text.length > 100 ? '...' : '');
                        translatedText.textContent = data.translated_text.substring(0, 100) + (data.translated_text.length > 100 ? '...' : '');
                        translationInfo.classList.remove('hidden');
                    }
                    
                    // Create audio blob from base64 data
                    const audioBlob = base64ToBlob(data.audio_data, 'audio/mpeg');
                    const audioUrl = URL.createObjectURL(audioBlob);
                    audioPlayer.src = audioUrl;
                    
                    // Store audio data for download
                    downloadBtn.onclick = function() {
                        downloadAudio(data.audio_data);
                    };
                    
                    audioContainer.classList.remove('hidden');
                    
                    resultsSection.classList.remove('hidden');
                    
                } else {
                    showError(data.error || 'An error occurred during conversion');
                }
                
            } catch (error) {
                showError('Network error: ' + error.message);
            } finally {
                loadingSection.classList.add('hidden');
                convertBtn.disabled = false;
                convertBtn.innerHTML = `
                    <span class="flex items-center justify-center space-x-3">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                        </svg>
                        <span>Generate Speech</span>
                    </span>
                `;
            }
        });

        function hideAllSections() {
            resultsSection.classList.add('hidden');
            errorSection.classList.add('hidden');
            successMessage.classList.add('hidden');
            translationInfo.classList.add('hidden');
            audioContainer.classList.add('hidden');
        }

        function showError(message) {
            document.getElementById('errorText').textContent = message;
            errorSection.classList.remove('hidden');
        }

        // Convert base64 to blob for audio playback
        function base64ToBlob(base64, mimeType) {
            const byteCharacters = atob(base64);
            const byteNumbers = new Array(byteCharacters.length);
            for (let i = 0; i < byteCharacters.length; i++) {
                byteNumbers[i] = byteCharacters.charCodeAt(i);
            }
            const byteArray = new Uint8Array(byteNumbers);
            return new Blob([byteArray], { type: mimeType });
        }

        // Download audio function
        function downloadAudio(audioData) {
            const audioBlob = base64ToBlob(audioData, 'audio/mpeg');
            const url = URL.createObjectURL(audioBlob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `tts_audio_${Date.now()}.mp3`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // File input handlers
        document.getElementById('fileInput').addEventListener('change', function() {
            if (this.files.length > 0) {
                textInput.value = '';
                charCount.textContent = '0';
            }
        });

        textInput.addEventListener('input', function() {
            if (this.value.trim()) {
                document.getElementById('fileInput').value = '';
            }
        });
    </script>
</body>
</html>